// Navigation pane project template
import bb.cascades 1.0

NavigationPane {
    function checkLoggedIn() {
        var loggedIn = app.loggedIn()
        mainMenu.text = loggedIn
        
        if (loggedIn == "false") {
            // show detail page when the button is clicked
            var page = getLoginPage();
            console.debug("pushing detail " + page)
            navigationPane.push(page);
        }
    }
    
    property Page loginPage
    function getLoginPage() {
        if (! loginPage) {
            loginPage = loginPageDefinition.createObject();
        }
        return loginPage;
    }
    attachedObjects: [
        ComponentDefinition {
            id: loginPageDefinition
            source: "Login.qml"
        }
    ]
    
    id: navigationPane
    Page {
        // page with a picture thumbnail
        Container {
            MainMenu {
                id: mainMenu
                horizontalAlignment: HorizontalAlignment.Center
                verticalAlignment: VerticalAlignment.Center
            }
        }
    }
    onCreationCompleted: {
        checkLoggedIn()
    }
}
